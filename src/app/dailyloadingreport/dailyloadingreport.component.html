<div class="m-grid__item m-grid__item--fluid m-wrapper">

    <!-- BEGIN: Subheader -->
    <div class="m-subheader ">
      <div class="d-flex align-items-center">
        <div class="mr-auto">
          <h3 class="m-subheader__title m-subheader__title--separator">Daily Loading Report</h3>
          <ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
            <li class="m-nav__item m-nav__item--home">
              <a href="#" class="m-nav__link m-nav__link--icon">
                <i class="m-nav__link-icon la la-home"></i>
              </a>
            </li>
            <li class="m-nav__separator">-</li>
            <li class="m-nav__item">
              <a href="" class="m-nav__link">
                <span class="m-nav__link-text">Cash Routine Data</span>
              </a>
            </li>
            <li class="m-nav__separator">-</li>
            <li class="m-nav__item">
              <a href="" class="m-nav__link">
                <span class="m-nav__link-text">Daily Loading Report</span>
              </a>
            </li>
          </ul>
        </div>
        <div>
          <a href="#" data-toggle="modal" data-target="#m_modal_7" class="btn btn-accent m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air">
            <span>
              <i class="la la-download"></i>
              <span>Download </span>
            </span>
          </a>
          <a href="#" data-toggle="modal" data-target="#m_modal_6" class="btn btn-primary m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air">
            <span>
              <i class="la la-upload"></i>
              <span>Upload</span>
            </span>
          </a>
          <div class="modal fade" id="m_modal_6" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Upload Daily Loading Report</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <div class="modal-body">
                 <!-- upload form  -->
                 <form class="m-form m-form--fit m-form--label-align-right" name="cbrupload"  [formGroup]="uploadForm">
                    <div class="m-portlet__body">
                      <div class="form-group1 m-form__group">
                        <label for="exampleInputEmail1">Bank Code</label>
                        <div></div>
                        <select class="custom-select form-control" [(ngModel)]="uploadData.bank_code"  
                        name="bank_code"
                        formControlName="bank_code"  [ngClass]="{ 'is-invalid': submitted && f.bank_code.errors }"> 
                          <!-- <option selected="">Open this select menu</option> -->
                          <option value="ALL">All</option>
                          <!-- <option value="BOMH2">BOMH2</option>
                          <option value="BOMH3">BOMH3</option> -->
                        </select>
                       
                      </div>
                      <!-- <div class="form-group1 m-form__group">
                        <label for="exampleInputEmail1">CRA</label>
                        <div></div>
                        <select class="custom-select form-control " formControlName="cra"
                         [(ngModel)]="uploadData.cra" name="cra" [ngClass]="{ 'is-invalid': submitted && f.cra.errors }">
                          
                          <option value="SIS">SIS</option>
                           <option value="2">two</option>
                          <option value="3">three</option> 
                        </select>
                      </div> -->
                      <div class="form-group1 m-form__group">
                        <label for="exampleInputEmail1">Project</label>
                        <div></div>
                        <select class="custom-select form-control " formControlName="project"
                         [(ngModel)]="uploadData.project" name="project" [ngClass]="{ 'is-invalid': submitted && f.project.errors }">
                          
                          <option value="MOF">MOF</option>
                          <!-- <option value="2">two</option>
                          <option value="3">three</option> -->
                        </select>
                      </div>
                     
                      <div class="form-group1 m-form__group">
  
                        <label for="exampleInputEmail1">Date and Time</label>
  
                        <input type="text" formControlName="date" name="date" placeholder="Select Date" class="form-control" [bsValue]="uploadData.date"
                          placement="right" bsDatepicker >
                        <input class="form-control" formControlName="time" name="time" placeholder="Select Time"  value="{{uploadData.time}}" (click)='openTimeSelector()' />
                      </div>
  
                      <div class="form-group m-form__group">
                        <label for="exampleInputEmail1">Select File </label>
                        <div></div>
                        <div class="custom-file">
                          <input type="file"   name="file"  class="custom-file-input"  
                          (change)="onFileChanged($event)" #fileInput  [ngClass]="{ 'is-invalid': submitted && !uploadData.file }">
                          <label class="custom-file-label"  (click)="fileInput.click()">Choose file</label>
                        </div>
                      </div>
                    </div>
                  </form>

                  <!-- upload form ends here -->
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary"  name="submit" (click)="uploadDatafn()">Submit</button>
                </div>
              </div>
            </div>
          </div>
          <div class="modal fade" id="m_modal_7" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Download Daily Loading Report Sheet</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form class="m-form m-form--fit m-form--label-align-right">
                    <div class="m-portlet__body">
                      <div class="form-group1 m-form__group">
                        <label for="exampleInputEmail1">CRA</label>
                        <div></div>
                        <select class="custom-select form-control">
                          <option selected="">Open this select menu</option>
                          <option value="1">One</option>
                          <option value="2">Two</option>
                          <option value="3">Three</option>
                        </select>
                      </div>
                      <div class="form-group1 m-form__group">
                        <label for="exampleInputEmail1">Date</label>
                        <div></div>
                        <input type="text" class="form-control">
                      </div>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Download</button>
                </div>
              </div>
            </div>
          </div>
          <div class="modal fade" id="exportmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Export</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form class="m-form m-form--fit m-form--label-align-right">
                    <div class="m-portlet__body">
                      <div class="form-group1 m-form__group">
                        <label for="exampleInputEmail1">Date</label>
                        <div></div>
                        <input type="text" class="form-control daterange">
                      </div>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Download</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- END: Subheader -->
    <!-- END: Subheader -->
    <div class="m-content">
        <div class="m-alert m-alert--icon alert  alert-{{alert.class}}" role="alert" *ngIf="alert.isvisible">
            <div class="m-alert__icon">
              <i class="flaticon-danger"></i>
            </div>
            <div class="m-alert__text">
              <strong>{{alert.type}}!</strong> {{alert.text}}
            </div>
            <div class="m-alert__actions" style="width: 220px;">
              <button type="button" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" (click)="alert.isvisible=false" aria-label="Close">Close
              </button>
            </div>
          </div>
      <!--begin::Portlet-->

      <!--end::Portlet-->
      <div class="m-portlet m-portlet--mobile" id="atmsdataportlet">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title"><h3 class="m-portlet__head-text">All Data</h3></div>
          </div>
          <div class="m-portlet__head-tools">
            <ul class="m-portlet__nav">
              <li class="m-portlet__nav-item" [ngClass]="{'filter-applied': filtersForAllView.bank_name || filtersForAllView.feeder_branch}">
                <a href="#" data-toggle="modal" data-target="#modalfilter" class="filters btn btn-primary m-btn m-btn--icon m-btn--icon-only">
                  <i class="la la-filter"></i>
                </a>
                <div class="modal fade" id="modalfilter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle"><i class="la la-filter"></i> Filter Records</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">×</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <!-- filter form for view all data -->
                      <form class="m-form m-form--fit m-form--label-align-right" >
                          <div class="m-portlet__body">
                            <div class="form-group1 m-form__group">
                              <label for="exampleInputEmail1">Bank</label>
                              <div></div>
                              <select class="form-control m-bootstrap-select" id="m_form_status" 
                              [(ngModel)]="filtersForAllView.bank_name"
                              [ngModelOptions]="{standalone: true}" >
                                <option value="all">All</option>
                                <option value="State Bank of India">State Bank of India</option>
                                <option value="Bank of India">Bank of India</option>
                                <option value="Punjab National Bank">Punjab National Bank</option>
                                <option value="Kotak Bank">Kotak Bank</option>
                              </select>
                            </div>
                            <div class="form-group m-form__group">
                              <label class="">Feeder Branch:</label>
                              <div class="m-input-icon m-input-icon--right">
                                <select class="form-control m-bootstrap-select" 
                                [(ngModel)]="filtersForAllView.feeder_branch"
                                [ngModelOptions]="{standalone: true}">
                                  <option value="all">All</option>
                                  <option value="Ghatkopar">Ghatkopar</option>
                                  <option value="Mulund">Mulund</option>
                                  <option value="Bhandup">Bhandup</option>
                                  <option value="Matunga">Matunga</option>
                                  <option value="Dadar">Dadar</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </form>
                        <!-- filter form for view all data -->
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" (click)="updateAll()">Submit</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal fade" id="editrecord" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle"><i class="la la-edit"></i> Edit Record</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">×</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <div class="m-scrollable m-scroller" data-scrollbar-shown="true" data-scrollable="true" data-height="300" style="height: 300px; overflow: auto;">
                          <form class="m-form m-form--fit m-form--label-align-right">
                            <div class="m-portlet__body">
                              <div class="form-group m-form__group">
                                <label for="exampleInputEmail1">ATM ID</label>
                                <input type="email" class="form-control m-input m-input--square" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="">
                              </div>
                              <div class="form-group m-form__group">
                                <label for="exampleSelect1">Bank</label>
                                <select class="form-control m-input m-input--square" id="exampleSelect1">
                                  <option>1</option>
                                  <option>2</option>
                                  <option>3</option>
                                  <option>4</option>
                                  <option>5</option>
                                </select>
                              </div>
                              <div class="form-group m-form__group">
                                <label for="exampleSelect1">Feeder Branch</label>
                                <select class="form-control m-input m-input--square" id="exampleSelect1">
                                  <option>1</option>
                                  <option>2</option>
                                  <option>3</option>
                                  <option>4</option>
                                  <option>5</option>
                                </select>
                              </div>
                              <div class="form-group m-form__group">
                                <label for="exampleInputEmail1">CRA</label>
                                <input type="email" class="form-control m-input m-input--square" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="">
                              </div>
                              <div class="form-group m-form__group">
                                <label for="exampleInputEmail1">Bank Email</label>
                                <input type="email" class="form-control m-input m-input--square" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="">
                              </div>
                              <div class="form-group m-form__group">
                                <label for="exampleInputEmail1">CRA Custodian</label>
                                <input type="email" class="form-control m-input m-input--square" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="">
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Submit</button>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              <li class="m-portlet__nav-item">
                <a href="#" m-portlet-tool="toggle" class="m-portlet__nav-link m-portlet__nav-link--icon">
                  <i class="la la-angle-down"></i>
                </a>
              </li>
              <li class="m-portlet__nav-item">
                <a href="#" m-portlet-tool="fullscreen" class="m-portlet__nav-link m-portlet__nav-link--icon">
                  <i class="la la-expand"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="m-portlet__body">
          <!--begin: Search Form -->
          <div class="m-form m-form--label-align-right m--margin-bottom-30">
            <div class="row">
              <div class="col-lg-4">
                <div class="m-input-icon m-input-icon--left">
               <input type="text" class="form-control m-input" placeholder="Search..." (keyup)='viewSearch($event)'  id="generalSearch">
                  <span class="m-input-icon__icon m-input-icon__icon--left">
                    <span>
                      <i class="la la-search"></i>
                    </span>
                  </span>
                </div>
              </div>
              <div class="col-lg-8 m--align-right">
                <div class="dropdown m-dropdown--inline">
                  <button class="btn btn-brand dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 40px, 0px);">
                    <a class="dropdown-item m--font-primary" href="#" data-toggle="modal" data-target="#exportmodal">
                      <i class="fa fa-file-export m--font-primary"></i> Export</a>
                  </div>
                </div>
                <div class="dropdown bootstrap-select show-tick form-control m-bootstrap-select m-dropdown--inline dropup" style="width: 200px;">
                  
                 
<!--  select column in viewallData -->
                <select class="form-control m-bootstrap-select m-dropdown--inline" data-width="200px" multiple 
                data-style="btn-metal" [(ngModel)]="selectedColumn" (change)="columnChangefn()">
               
                <option  
                *ngFor="let viewCol of viewColumnAll"
                value="{{viewCol.prop}}"  >
                  {{viewCol.name}}
                </option>
                
              </select>
<!--   select column  in viewallData -->
                    
                    
                  
                  </div>
              </div>	
            </div>
          </div>

          <!--end: Search Form -->

          <!--begin: Datatable -->
          <ngx-datatable   #mydatatable
        class="material"
        [headerHeight]="50"
        [limit]="20"
        [columnMode]="'force'"
        [footerHeight]="50"
        [rowHeight]="'60'"
        [rows]="rows"
        [scrollbarH]="true"
       
        >
        <!-- [externalPaging]="true"
        [count]="page.totalElements"
        [offset]="page.pageNumber"
        [limit]="page.size"
        (page)='setPage($event)' -->


        <ng-container *ngFor="let viewCol of viewColumn">
          
            <ngx-datatable-column   
           
            name="{{viewCol.name}}"
         prop="{{viewCol.prop}}"
         
          >
          <ng-template ngx-datatable-cell-template let-value="value" >
            {{value}}
          </ng-template>
        </ngx-datatable-column> 
          </ng-container>

       
      </ngx-datatable>
        </div>
      </div>
    </div>
  </div>


  <ng-template #previewModal class="modal-lg  preview-modal">
      <div class="modal-header">
        <h4 class="modal-title pull-left">Preview</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="m-input-icon m-input-icon--left col-10">
                <input type="text" class="form-control m-input" placeholder="Search..."
                 [(ngModel)]="previewFilter"   (keyup)='previewSearch($event)'
                 >
                <span class="m-input-icon__icon m-input-icon__icon--left">
                  <span>
                    <i class="la la-search"></i>
                  </span>
                </span>
              </div>
              <ul class="m-portlet__nav col-2">
                <li class="m-portlet__nav-item" [ngClass]="{'filter-applied': filtersForAllView.bank_name || filtersForAllView.feeder_branch}">
                  <a href="#" data-toggle="modal" data-target="#modalfilter" class="m-portlet__nav-link m-portlet__nav-link--icon filters">
                    <i class="la la-filter"></i>
                  </a>
                  <div class="modal fade" id="modalfilter1" tabindex="-1" role="dialog" 
                  aria-labelledby="exampleModalCenterTitle"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLongTitle1"><i class="la la-filter"></i> Filter Records</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form class="m-form m-form--fit m-form--label-align-right" >
                            <div class="m-portlet__body">
                              <div class="form-group1 m-form__group">
                                <label for="exampleInputEmail1">Bank</label>
                                <div></div>
                                <select class="form-control m-bootstrap-select" id="m_form_status" 
                                [(ngModel)]="filtersForAllView.bank_name"
                                [ngModelOptions]="{standalone: true}" >
                                  <option value="all">All</option>
                                  <option value="State Bank of India">State Bank of India</option>
                                  <option value="Bank of India">Bank of India</option>
                                  <option value="Punjab National Bank">Punjab National Bank</option>
                                  <option value="Kotak Bank">Kotak Bank</option>
                                </select>
                              </div>
                              <div class="form-group m-form__group">
                                <label class="">Feeder Branch:</label>
                                <div class="m-input-icon m-input-icon--right">
                                  <select class="form-control m-bootstrap-select" 
                                  [(ngModel)]="filtersForAllView.feeder_branch"
                                  [ngModelOptions]="{standalone: true}">
                                    <option value="all">All</option>
                                    <option value="Ghatkopar">Ghatkopar</option>
                                    <option value="Mulund">Mulund</option>
                                    <option value="Bhandup">Bhandup</option>
                                    <option value="Matunga">Matunga</option>
                                    <option value="Dadar">Dadar</option>
                                  </select>
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          <button type="button" class="btn btn-primary" (click)="updateAll()">Submit</button>
                        </div>
                      </div>
                    </div>
                  </div>
                 
                </li>
              </ul>
        </div>
      
        <div class="table">
          
        <ngx-datatable   #previewData
        class="material"
        [headerHeight]="50"
        [limit]="10"
        [columnMode]="'force'"
        [footerHeight]="50"
        [rowHeight]="'60'"
        [rows]="previewRows"
        [scrollbarH]="true"
        
        >
        <!-- [externalPaging]="true"
        [count]="page.totalElements"
        [offset]="page.pageNumber"
        [limit]="page.size"
        (page)='setPage($event)' -->
        <ngx-datatable-column name="Term Id" prop="term_id">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
     
        <ngx-datatable-column name="Acceptor Name" prop="acceptorname">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Project Id" prop="project_id">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Cassette 1" prop="cassette1">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Cassette 2" prop="cassette2">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Cassette 3" prop="cassette3">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
          <ngx-datatable-column name="Cassette 4" prop="cassette4">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
         <ngx-datatable-column name="Cassette 4" prop="cassette4">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
    
        <ngx-datatable-column name="Total Cash" prop="tot_cash">
          <ng-template ngx-datatable-cell-template let-value="value">
            {{value}}
          </ng-template>
        </ngx-datatable-column>
       
      
     
      </ngx-datatable>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary"  name="submit" (click)="approvePreviewFn()">Approve</button>
      </div>
    </ng-template>